# Spring IoC æ¦‚å¿µåŠå®æˆ˜

# è¯´åœ¨å‰é¢

- **æœ¬ç« ç›¸å…³ä»£ç åŠç¬”è®°åœ°å€**ï¼šé£æœºç¥¨ğŸš€
- **ğŸŒ**Githubï¼š**[**ğŸš€Javaè¶…ç¥ä¹‹è·¯ï¼šã€ğŸ”Javaå…¨ç”Ÿæ€æŠ€æœ¯å­¦ä¹ ç¬”è®°ï¼Œä¸€èµ·è¶…ç¥å§ğŸ”ã€‘](https://github.com/EayonLee/JavaGod)
- **ğŸª**CSDNï¼š**[**ğŸš€Javaè¶…ç¥ä¹‹è·¯ï¼šã€ğŸ”Javaå…¨ç”Ÿæ€æŠ€æœ¯å­¦ä¹ ç¬”è®°ï¼Œä¸€èµ·è¶…ç¥å§ğŸ”ã€‘](https://blog.csdn.net/qq_20492277/article/details/114269863)

# ç›®å½•
- [Spring IoC](#spring-ioc)
- [è¯´åœ¨å‰é¢](#è¯´åœ¨å‰é¢)
- [ç›®å½•](#ç›®å½•)
- [ä¸€. ä»€ä¹ˆæ˜¯Springï¼Ÿ](#ä¸€-ä»€ä¹ˆæ˜¯spring)
  - [1.1 ä»€ä¹ˆæ˜¯Springï¼Ÿï¼ˆé¢è¯•é¢˜ï¼‰](#11-ä»€ä¹ˆæ˜¯springé¢è¯•é¢˜)
  - [1.2 Springä¼˜ç‚¹ï¼ˆé¢è¯•é¢˜ï¼‰](#12-springä¼˜ç‚¹é¢è¯•é¢˜)
- [äºŒ. å…¥é—¨æ¡ˆä¾‹](#äºŒ-å…¥é—¨æ¡ˆä¾‹)
  - [2.1 ä¸‹è½½Spring 5](#21-ä¸‹è½½spring-5)
  - [2.2 åˆ›å»ºJavaå·¥ç¨‹](#22-åˆ›å»ºjavaå·¥ç¨‹)
  - [2.3 å¯¼å…¥Springæ ¸jaråŒ…](#23-å¯¼å…¥springæ ¸jaråŒ…)
  - [2.4 åˆ›å»ºUserç±»](#24-åˆ›å»ºuserç±»)
  - [2.5 åˆ›å»ºXMLé…ç½®æ–‡ä»¶å»å®ä¾‹åŒ–User Bean](#25-åˆ›å»ºxmlé…ç½®æ–‡ä»¶å»å®ä¾‹åŒ–user-bean)
  - [2.6 æµ‹è¯•](#26-æµ‹è¯•)
- [ä¸‰. Spring-IoCæ§åˆ¶åè½¬ ç›¸å…³æ¦‚å¿µ](#ä¸‰-spring-iocæ§åˆ¶åè½¬-ç›¸å…³æ¦‚å¿µ)
  - [3.1 ä»€ä¹ˆæ˜¯IoCï¼ˆé¢è¯•ï¼‰](#31-ä»€ä¹ˆæ˜¯iocé¢è¯•)
  - [3.2 IoCåº•å±‚åŸç†ï¼ˆé¢è¯•ï¼‰](#32-iocåº•å±‚åŸç†é¢è¯•)
  - [3.3 Springæä¾›IoCå®¹å™¨å®ç°çš„ä¸¤ç§æ–¹å¼ï¼ˆSpringçš„ä¸¤ä¸ªæ ¸å¿ƒæ¥å£ï¼‰ï¼ˆé¢è¯•ï¼‰](#33-springæä¾›iocå®¹å™¨å®ç°çš„ä¸¤ç§æ–¹å¼springçš„ä¸¤ä¸ªæ ¸å¿ƒæ¥å£é¢è¯•)
  - [3.4 ApplicationContextæ¥å£ä¸»è¦çš„å®ç°ç±»ï¼ˆé¢è¯•ï¼‰](#34-applicationcontextæ¥å£ä¸»è¦çš„å®ç°ç±»é¢è¯•)
  - [3.5 Springä¸­Beançš„ä½œç”¨åŸŸï¼ˆé¢è¯•ï¼‰](#35-springä¸­beançš„ä½œç”¨åŸŸé¢è¯•)
- [å››. IoC Beanç®¡ç† - åŸºäºXMLæ–¹å¼](#å››-ioc-beanç®¡ç†---åŸºäºxmlæ–¹å¼)
  - [4.1 ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼Ÿ](#41-ä»€ä¹ˆæ˜¯beanç®¡ç†)
  - [4.2 åˆ›å»ºBean](#42-åˆ›å»ºbean)
  - [4.3 å±æ€§æ³¨å…¥](#43-å±æ€§æ³¨å…¥)
    - [4.3.1 setteræ–¹å¼](#431-setteræ–¹å¼)
    - [4.3.2 æ„é€ å‡½æ•°æ–¹å¼](#432-æ„é€ å‡½æ•°æ–¹å¼)
    - [4.3.3 å±æ€§æ³¨å…¥ - æ³¨å…¥å¤–éƒ¨Bean](#433-å±æ€§æ³¨å…¥---æ³¨å…¥å¤–éƒ¨bean)
    - [4.3.4 å±æ€§æ³¨å…¥ - æ³¨å…¥å†…éƒ¨Bean](#434-å±æ€§æ³¨å…¥---æ³¨å…¥å†…éƒ¨bean)
    - [4.3.5 å±æ€§æ³¨å…¥ - é›†åˆå±æ€§](#435-å±æ€§æ³¨å…¥---é›†åˆå±æ€§)
  - [4.4 FactoryBeanï¼ˆå·¥å‚Beanï¼‰](#44-factorybeanå·¥å‚bean)
    - [4.4.1 ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºå·¥å‚Bean](#441-ç¬¬ä¸€æ­¥åˆ›å»ºå·¥å‚bean)
    - [4.4.2 ç¬¬äºŒæ­¥ï¼šåœ¨XMLä¸­å®šä¹‰Bean](#442-ç¬¬äºŒæ­¥åœ¨xmlä¸­å®šä¹‰bean)
    - [4.4.3 ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•](#443-ç¬¬ä¸‰æ­¥æµ‹è¯•)
  - [4.5 Beançš„ä½œç”¨åŸŸï¼ˆå•ä¾‹/å¤šä¾‹ï¼‰](#45-beançš„ä½œç”¨åŸŸå•ä¾‹å¤šä¾‹)
    - [4.5.1 éªŒè¯Springé»˜è®¤æƒ…å†µä¸‹çš„Beanæ˜¯å•ä¾‹çš„](#451-éªŒè¯springé»˜è®¤æƒ…å†µä¸‹çš„beanæ˜¯å•ä¾‹çš„)
    - [4.5.1 ä¿®æ”¹Spring Beané»˜è®¤å•ä¾‹ä¸ºå¤šä¾‹](#451-ä¿®æ”¹spring-beané»˜è®¤å•ä¾‹ä¸ºå¤šä¾‹)
  - [4.6 è‡ªåŠ¨è£…é…ï¼ˆè‡ªåŠ¨æ³¨å…¥ï¼‰](#46-è‡ªåŠ¨è£…é…è‡ªåŠ¨æ³¨å…¥)
    - [4.6.1 æ‰‹åŠ¨è£…é…](#461-æ‰‹åŠ¨è£…é…)
    - [4.6.2 è‡ªåŠ¨è£…é…](#462-è‡ªåŠ¨è£…é…)
- [äº”. IoC Beanç®¡ç† - åŸºäºæ³¨è§£æ–¹å¼](#äº”-ioc-beanç®¡ç†---åŸºäºæ³¨è§£æ–¹å¼)
  - [5.1 Springä¸­åˆ›å»ºBeançš„æ³¨è§£](#51-springä¸­åˆ›å»ºbeançš„æ³¨è§£)
  - [5.2 åŸºäºæ³¨è§£å®ç°Beanåˆ›å»º](#52-åŸºäºæ³¨è§£å®ç°beanåˆ›å»º)
    - [5.2.1 å¼•å…¥ä¾èµ–](#521-å¼•å…¥ä¾èµ–)
    - [5.2.2 å¼€å¯ç»„ä»¶æ‰«æ](#522-å¼€å¯ç»„ä»¶æ‰«æ)
    - [5.2.3 åˆ›å»ºç±» æ·»åŠ æ³¨è§£](#523-åˆ›å»ºç±»-æ·»åŠ æ³¨è§£)
    - [5.2.4 æµ‹è¯•](#524-æµ‹è¯•)
  - [5.3 åŸºäºæ³¨è§£å®ç°å±æ€§è‡ªåŠ¨æ³¨å…¥](#53-åŸºäºæ³¨è§£å®ç°å±æ€§è‡ªåŠ¨æ³¨å…¥)
    - [5.3.1 @AutoWired](#531-autowired)
    - [5.3.2 @Qualifie](#532-qualifie)
    - [5.3.3 @Resource](#533-resource)
    - [5.3.4 @Value](#534-value)
- [å…­. é€šè¿‡é…ç½®ç±»å®Œå…¨æ›¿ä»£XMLæ–‡ä»¶](#å…­-é€šè¿‡é…ç½®ç±»å®Œå…¨æ›¿ä»£xmlæ–‡ä»¶)
  - [6.1 åˆ›å»ºé…ç½®ç±»](#61-åˆ›å»ºé…ç½®ç±»)
  - [6.2 æµ‹è¯•](#62-æµ‹è¯•)


# ä¸€. ä»€ä¹ˆæ˜¯Springï¼Ÿ

## 1.1 ä»€ä¹ˆæ˜¯Springï¼Ÿï¼ˆé¢è¯•é¢˜ï¼‰

Springæ˜¯ä¸€ä¸ªè®¾è®¡å±‚æ¡†æ¶ï¼Œæœ‰ä¸¤ä¸ªæ ¸å¿ƒï¼š

**IOCæ§åˆ¶åè½¬**ï¼Œç›®çš„æ˜¯é™ä½è€¦åˆåº¦ï¼Œå®ƒæ˜¯åŸºäºå·¥å‚è®¾è®¡æ¨¡å¼ï¼Œæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯å°†è‡ªå·±æ‰‹åŠ¨newå¯¹è±¡çš„æ“ä½œäº¤ç»™Springå®¹å™¨æ¥å®Œæˆã€‚å’Œæ§åˆ¶åè½¬é…å¥—ä½¿ç”¨çš„è¿˜æœ‰ä¸€ä¸ªDIä¾èµ–æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ„é€ å‡½æ•°æ³¨å…¥ã€å±æ€§æ³¨å…¥ï¼ˆgetter/setterï¼‰ç­‰ã€‚æœ€å¸¸ç”¨çš„è¿˜æ˜¯å±æ€§æ³¨å…¥ã€‚å¯ä»¥æ³¨å…¥å„ç§ç±»å‹ï¼šMapã€Listã€Propertiesã€‚æ³¨å…¥å¯ä»¥é€šè¿‡ByTypeå’ŒByNameåˆ†åˆ«æŒ‰ç…§ç±»å‹å’Œåå­—è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ã€‚Springä¸­çš„Beanæ”¯æŒå•ä¾‹å’ŒåŸå‹ä¸¤ç§æ–¹å¼ï¼Œé»˜è®¤æ˜¯å•ä¾‹çš„ã€‚å¯ä»¥é€šè¿‡Scope="seingleton"ï¼ŒScope="prototype"æ¥é…ç½®ã€‚æ‰€è°“å•ä¾‹ï¼šå³è‡³å§‹è‡³ç»ˆåœ¨JVMä¸­éƒ½åªæœ‰ä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹ã€‚æ‰€è°“åŸå‹ï¼šä¹Ÿå«å¤šä¾‹ï¼Œå°±æ˜¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚

**AOPé¢å‘åˆ‡é¢ç¼–ç¨‹**ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡Œæ–¹æ³•å¢å¼ºï¼ŒAOPæ˜¯OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„å»¶ç»­ï¼Œä¸»è¦ç”¨äºæ—¥å¿—è®°å½•ã€æ€§èƒ½ç»Ÿè®¡ã€å®‰å…¨æ§åˆ¶ã€äº‹åŠ¡å¤„ç†ç­‰æ–¹é¢ã€‚å®ƒæ˜¯åŸºäºä»£ç†è®¾è®¡æ¨¡å¼ï¼Œè€Œä»£ç†è®¾è®¡æ¨¡å¼åˆåˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ï¼Œé™æ€ä»£ç†æ¯”è¾ƒç®€å•å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåˆ†åˆ«ç”±ä¸€ä¸ªçœŸå®å®ç°å’Œä¸€ä¸ªä»£ç†å®ç°ï¼Œè€ŒåŠ¨æ€ä»£ç†åˆ†ä¸ºåŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†å’ŒåŸºäºç±»çš„cglibçš„åŠ¨æ€ä»£ç†ï¼Œå’±ä»¬æ­£å¸¸éƒ½æ˜¯é¢å‘æ¥å£å¼€å‘ï¼Œæ‰€ä»¥AOPä½¿ç”¨çš„æ˜¯åŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†ã€‚

**æ³¨ï¼šPOJOå’ŒJavaBeançš„åŒºåˆ«**

- POJO å’ŒJavaBeanæ˜¯æˆ‘ä»¬å¸¸è§çš„ä¸¤ä¸ªå…³é”®å­—ï¼Œä¸€èˆ¬å®¹æ˜“æ··æ·†ï¼ŒPOJOå…¨ç§°æ˜¯Plain Ordinary Java Object / Pure Old Java Objectï¼Œä¸­æ–‡å¯ä»¥ç¿»è¯‘æˆï¼šæ™®é€šJavaç±»ï¼Œå…·æœ‰ä¸€éƒ¨åˆ†getter/setteræ–¹æ³•çš„é‚£ç§ç±»å°±å¯ä»¥ç§°ä½œPOJOï¼Œä½†æ˜¯JavaBeanåˆ™æ¯” POJOå¤æ‚å¾ˆå¤šï¼Œ Java Bean æ˜¯å¯å¤ç”¨çš„ç»„ä»¶ï¼Œå¯¹ Java Bean å¹¶æ²¡æœ‰ä¸¥æ ¼çš„è§„èŒƒï¼Œç†è®ºä¸Šè®²ï¼Œä»»ä½•ä¸€ä¸ª Java ç±»éƒ½å¯ä»¥æ˜¯ä¸€ä¸ª Bean ã€‚ä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œç”±äº Java Bean æ˜¯è¢«å®¹å™¨æ‰€åˆ›å»ºï¼ˆå¦‚ Tomcat) çš„ï¼Œæ‰€ä»¥ Java Bean åº”å…·æœ‰ä¸€ä¸ªæ— å‚çš„æ„é€ å™¨ã€‚

- é€šå¸¸ Java Bean è¿˜è¦å®ç° Serializable æ¥å£ç”¨äºå®ç° Bean çš„æŒä¹…æ€§ã€‚ Java Bean æ˜¯ä¸èƒ½è¢«è·¨è¿›ç¨‹è®¿é—®çš„ã€‚JavaBeanæ˜¯ä¸€ç§ç»„ä»¶æŠ€æœ¯ï¼Œå°±å¥½åƒä½ åšäº†ä¸€ä¸ªæ‰³å­ï¼Œè€Œè¿™ä¸ªæ‰³å­ä¼šåœ¨å¾ˆå¤šåœ°æ–¹è¢«æ‹¿å»ç”¨ï¼Œè¿™ä¸ªæ‰³å­ä¹Ÿæä¾›å¤šç§åŠŸèƒ½(ä½ å¯ä»¥æ‹¿è¿™ä¸ªæ‰³å­æ‰³ã€é”¤ã€æ’¬ç­‰ç­‰)ï¼Œè€Œè¿™ä¸ªæ‰³å­å°±æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚ä¸€èˆ¬åœ¨webåº”ç”¨ç¨‹åºä¸­å»ºç«‹ä¸€ä¸ªæ•°æ®åº“çš„æ˜ å°„å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªèƒ½ç§°å®ƒä¸ºPOJOã€‚POJO(Plain Old Java Object)è¿™ä¸ªåå­—ç”¨æ¥å¼ºè°ƒå®ƒæ˜¯ä¸€ä¸ªæ™®é€šjavaå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå…¶ä¸»è¦ç”¨æ¥æŒ‡ä»£é‚£äº›æ²¡æœ‰éµä»ç‰¹å®šçš„Javaå¯¹è±¡æ¨¡å‹ã€çº¦å®šæˆ–æ¡†æ¶ï¼ˆå¦‚EJBï¼‰çš„Javaå¯¹è±¡ã€‚ç†æƒ³åœ°è®²ï¼Œä¸€ä¸ªPOJOæ˜¯ä¸€ä¸ªä¸å—ä»»ä½•é™åˆ¶çš„Javaå¯¹è±¡ï¼ˆé™¤äº†Javaè¯­è¨€è§„èŒƒï¼‰ã€‚

## 1.2 Springä¼˜ç‚¹ï¼ˆé¢è¯•é¢˜ï¼‰

- **IOCå¯ä»¥æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘**ï¼šåŸæ¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨newå¯¹è±¡ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦å°†åˆ›å»ºå¯¹è±¡äº¤ç»™IOCå¹¶ä¸”ç®¡ç†å¯¹è±¡ä¹‹é—´çš„å…³ç³»ä»è€Œé™ä½è€¦åˆã€‚
- **Aopç¼–ç¨‹æ”¯æŒ**ï¼šä¸æ”¹å˜æºä»£ç è¿›è¡Œæ–¹æ³•ï¼ˆåŠŸèƒ½ï¼‰å¢å¼º
- **æ–¹ä¾¿ç¨‹åºæµ‹è¯•**ï¼šSpringå¯¹Junitçš„æ”¯æŒå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿çš„æµ‹è¯•Springç¨‹åº
- **æ–¹ä¾¿å’Œå…¶ä»–æ¡†æ¶è¿›è¡Œæ•´åˆ**ï¼šæ–¹ä¾¿æ•´åˆMyBatisã€SpringMVCã€Hibernateã€Quartzç­‰ç­‰ã€‚
- **æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œ**ï¼šé€šè¿‡Springå£°æ˜å¼äº‹åŠ¡çµæ´»çš„è¿›è¡Œäº‹åŠ¡æ§åˆ¶ï¼Œæé«˜å¼€å‘æ•ˆç‡
- **é™ä½ APIå¼€å‘éš¾åº¦**ï¼šSpringå¯¹ä¸€äº›éš¾ç”¨çš„Java APIè¿›è¡Œäº†ç®€æ˜“å°è£…ï¼Œå¦‚JDBCã€JavaMail



# äºŒ. å…¥é—¨æ¡ˆä¾‹

## 2.1 ä¸‹è½½Spring 5

ä¸‹è½½åœ°å€ï¼šhttps://repo.spring.io/release/org/springframework/spring/

![image-20210819105019708](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105019708.png)

ä¸‹è½½å®Œæˆåï¼Œè§£å‹å¦‚ä¸‹ï¼š

![image-20210819104957397](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819104957397.png)

## 2.2 åˆ›å»ºJavaå·¥ç¨‹

![image-20210819105100148](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105100148.png)

## 2.3 å¯¼å…¥Springæ ¸jaråŒ…

ç”±äºç°åœ¨åªåšå…¥é—¨æ¡ˆä¾‹ï¼Œæ‰€ä»¥åªå¯¼å…¥Springçš„åŸºç¡€æ ¸å¿ƒjaråŒ…å³å¯ã€‚

é‚£æˆ‘ä»¬é€šè¿‡ä¸Šé¢Springæ¶æ„å›¾ä¸­å¯å¾—çŸ¥ Springçš„æ ¸å¿ƒä¸º4ä¸ª

![image-20210819105148588](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105148588.png)

é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä»libsæ–‡ä»¶å¤¹ä¸­å–å‡ºå¦‚ä¸Šå‡ ä¸ªJaråŒ…ç­‰å¾…å¯¼å…¥è¿›å·¥ç¨‹

![image-20210819105213141](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105213141.png)

commons-logging-1.1.1.jarï¼ˆæ—¥å¿—ï¼‰éœ€è¦å•ç‹¬ä¸‹è½½ï¼šhttp://commons.apache.org/proper/commons-logging/download_logging.cgi

**åˆ›å»ºå­˜æ”¾jaråŒ…çš„libæ–‡ä»¶å¤¹ï¼Œå¹¶å°†4ä¸ªjaråŒ…æ·»åŠ **

![image-20210819105235247](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105235247.png)

**å°†jaråŒ…å¯¼å…¥é¡¹ç›®**

![image-20210819105253684](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105253684.png)

![image-20210819105310891](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105310891.png)

![image-20210819105322813](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105322813.png)

## 2.4 åˆ›å»ºUserç±»

![image-20210819105709786](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105709786.png)

## 2.5 åˆ›å»ºXMLé…ç½®æ–‡ä»¶å»å®ä¾‹åŒ–User Bean

![image-20210819105536125](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105536125.png)

## 2.6 æµ‹è¯•

![image-20210819105558880](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105558880.png)



# ä¸‰. Spring-IoCæ§åˆ¶åè½¬ ç›¸å…³æ¦‚å¿µ

## 3.1 ä»€ä¹ˆæ˜¯IoCï¼ˆé¢è¯•ï¼‰

**IOCæ§åˆ¶åè½¬**ï¼Œç›®çš„æ˜¯é™ä½è€¦åˆåº¦ï¼Œå®ƒæ˜¯åŸºäºå·¥å‚è®¾è®¡æ¨¡å¼ï¼Œæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯å°†è‡ªå·±æ‰‹åŠ¨newå¯¹è±¡çš„æ“ä½œäº¤ç»™Springå®¹å™¨æ¥å®Œæˆã€‚å’Œæ§åˆ¶åè½¬é…å¥—ä½¿ç”¨çš„è¿˜æœ‰ä¸€ä¸ªDIä¾èµ–æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ„é€ å‡½æ•°æ³¨å…¥ã€å±æ€§æ³¨å…¥ç­‰ã€‚æœ€å¸¸ç”¨çš„è¿˜æ˜¯å±æ€§æ³¨å…¥ã€‚å¯ä»¥æ³¨å…¥å„ç§ç±»å‹ï¼šMapã€Listã€Propertiesã€‚æ³¨å…¥å¯ä»¥é€šè¿‡ByTypeå’ŒByNameåˆ†åˆ«æŒ‰ç…§ç±»å‹å’Œåå­—è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ã€‚Springä¸­çš„Beanæ”¯æŒå•ä¾‹å’ŒåŸå‹ä¸¤ç§æ–¹å¼ï¼Œé»˜è®¤æ˜¯å•ä¾‹çš„ã€‚å¯ä»¥é€šè¿‡Scope="seingleton"ï¼ŒScope="prototype"æ¥é…ç½®ã€‚æ‰€è°“å•ä¾‹ï¼šå³è‡³å§‹è‡³ç»ˆåœ¨JVMä¸­éƒ½åªæœ‰ä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹ã€‚æ‰€è°“åŸå‹ï¼šä¹Ÿå«å¤šä¾‹ï¼Œå°±æ˜¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚

## 3.2 IoCåº•å±‚åŸç†ï¼ˆé¢è¯•ï¼‰

**IOCåº•å±‚ä¸»è¦å®ç”¨æŠ€æœ¯**ï¼šxmlè§£æã€å·¥å‚è®¾è®¡æ¨¡å¼ã€åå°„

![image-20210819105846881](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105846881.png)

**ä¸Šå›¾è§£é‡Š**ï¼š

æ¯”å¦‚æˆ‘ä»¬æƒ³è¦åœ¨UserServletä¸­ä½¿ç”¨UserServiceä¸­çš„æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨UserServletä¸­å»new UserServiceï¼Œä½†æ˜¯è¿™æ ·è€¦åˆåº¦å¤ªé«˜äº†ã€‚æˆ‘ä»¬å¦‚æœä½¿ç”¨IoCæ¥æ‰˜ç®¡Beançš„è¯å°±æ˜¯å¦‚ä¸‹æƒ…å†µ

æˆ‘ä»¬åœ¨xmlæ–‡ä»¶ä¸­å»é€šè¿‡``<bean id="user" class="com.eayon.service.UserService"> ``æ ‡ç­¾é…ç½®éœ€è¦å®ä¾‹åŒ–çš„å¯¹è±¡ï¼ŒIoCçš„åº•å±‚å…¶å®å°±æ˜¯é€šè¿‡å·¥å‚ç±»ï¼ˆå·¥å‚è®¾è®¡æ¨¡å¼ï¼‰ï¼Œå»è§£æxmlæ–‡ä»¶ä¸­é…ç½®éœ€è¦å®ä¾‹åŒ–å¯¹äº›çš„beanæ ‡ç­¾ï¼ˆå¦‚ä½¿ç”¨dom4jè§£æxmlï¼‰ï¼Œä»è€Œè·å–åˆ°beanæ ‡ç­¾ä¸­çš„classå±æ€§å€¼ï¼Œå³æ˜¯éœ€è¦å®ä¾‹åŒ–å¯¹è±¡çš„Classå…¨è·¯å¾„ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡Class.forName()è·å–åˆ°ä»–çš„å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åé€šè¿‡newInstance()æ–¹æ³•é€šè¿‡åå°„åˆ›å»ºUserServiceå¯¹è±¡å¹¶è¿”å›ã€‚

è¿™æ ·UserServletç±»ä¸­çš„æ¯ä¸ªæ–¹æ³•å°±ä¸éœ€è¦ä¸€ä¸ªä¸ªå»newå¯¹è±¡äº†ï¼Œç›´æ¥é€šè¿‡å·¥å‚å»è·å–å°±å¯ä»¥ã€‚å°±ç®—UserServiceå¯¹è±¡çš„è·¯å¾„å˜äº†ï¼Œæˆ‘ä»¬ä¹Ÿåªéœ€è¦ä¿®æ”¹xmlé…ç½®æ–‡ä»¶ä¸­è¯¥ç±»çš„classå±æ€§å³å¯ã€‚

## 3.3 Springæä¾›IoCå®¹å™¨å®ç°çš„ä¸¤ç§æ–¹å¼ï¼ˆSpringçš„ä¸¤ä¸ªæ ¸å¿ƒæ¥å£ï¼‰ï¼ˆé¢è¯•ï¼‰

**IOC æ€æƒ³åŸºäº IOC å®¹å™¨å®Œæˆï¼ŒIOC å®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚**

ï¼ˆ1ï¼‰**BeanFactoryæ¥å£**ï¼šIOCå®¹å™¨åŸºæœ¬å®ç°ï¼Œæ˜¯Springå†…éƒ¨ç”¨æ¥å£ï¼Œä¸æä¾›ç»™å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨

â€‹		**ç‰¹ç‚¹**ï¼šåŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨ä½¿ç”¨getBean()è·å–å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡ã€‚

![image-20210819105958728](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819105958728.png)

ï¼ˆ2ï¼‰**ApplicationContextæ¥å£**ï¼šBeanFactoryæ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œæä¾›ç»™å¼€å‘äººå‘˜ä½¿ç”¨

â€‹		**ç‰¹ç‚¹**ï¼šåŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠåœ¨é…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»º

![image-20210819110020048](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110020048.png)

## 3.4 ApplicationContextæ¥å£ä¸»è¦çš„å®ç°ç±»ï¼ˆé¢è¯•ï¼‰

- **FileSystemXmlApplicationContext**ï¼šä»XMLæ–‡ä»¶ä¸­å»åŠ è½½beanï¼Œæ²¡æœ‰ç›˜ç¬¦çš„æ˜¯é¡¹ç›®å·¥ä½œè·¯å¾„,å³é¡¹ç›®çš„æ ¹ç›®å½•;æœ‰ç›˜ç¬¦è¡¨ç¤ºçš„æ˜¯æ–‡ä»¶ç»å¯¹è·¯å¾„.
- **ClassPathXmlApplicationContext**ï¼šä»XMLæ–‡ä»¶ä¸­å»åŠ è½½beanï¼Œé»˜è®¤å°±æ˜¯æŒ‡é¡¹ç›®çš„classpathè·¯å¾„ä¸‹é¢ã€‚å¦‚æœè¦ä½¿ç”¨ç»å¯¹è·¯å¾„,éœ€è¦åŠ ä¸Šfile:å‰ç¼€è¡¨ç¤ºè¿™æ˜¯ç»å¯¹è·¯å¾„;

**å¤‡æ³¨ï¼šé€šè¿‡Ctrl + H å¯ä»¥æŸ¥çœ‹ApplicationContextçš„ç»“æ„**

![image-20210819110056043](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110056043.png)

## 3.5 Springä¸­Beançš„ä½œç”¨åŸŸï¼ˆé¢è¯•ï¼‰

- **singleton**ï¼šå•ä¾‹ï¼Œå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹**ï¼ˆé»˜è®¤ï¼‰**
- **prototype**ï¼šå¤šä¾‹ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹
- **request**ï¼šå®ƒæ˜¯ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œè¯·æ±‚å®Œåbeanä¼šå¤±æ•ˆè¿›è¡Œåƒåœ¾å›æ”¶
- **session**ï¼šå®ƒæ˜¯ç¡®ä¿æ¯ä¸ªsessionä¸­éƒ½æœ‰ä¸€ä¸ªbeanå®ä¾‹ï¼Œå½“sessionè¿‡æœŸåbeanä¼šå¤±æ•ˆ

**singletionå’Œprototypeçš„åŒºåˆ«**ï¼š

é™¤äº†å•ä¾‹å’Œå¤šä¾‹çš„åŒºåˆ«å¤–è¿˜æœ‰å®ä¾‹åŒ–beanæ—¶æœºçš„åŒºåˆ«ï¼Œsingletonåˆ™åœ¨åŠ è½½xmlæ–‡ä»¶æ—¶å°±å»å®ä¾‹åŒ–ï¼Œè€Œprototypeåˆ™æ˜¯åœ¨getBean()çš„æ—¶å€™å®ä¾‹åŒ–



# å››. IoC Beanç®¡ç† - åŸºäºXMLæ–¹å¼

## 4.1 ä»€ä¹ˆæ˜¯Beanç®¡ç†ï¼Ÿ

**Beanç®¡ç†åˆ†ä¸º**ï¼š

- åˆ›å»ºå¯¹è±¡
- å±æ€§æ³¨å…¥ï¼ˆåˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œä¸ºç±»ä¸­å±æ€§è®¾ç½®å±æ€§å€¼ï¼‰

**Beanç®¡ç†çš„æ“ä½œæœ‰ä¸¤ç§æ–¹å¼**

- åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼å®ç°åˆ›å»ºå¯¹è±¡å’Œå±æ€§æ³¨å…¥
- åŸºäºæ³¨è§£æ–¹å¼å®ç°åˆ›å»ºå¯¹è±¡å’Œå±æ€§æ³¨å…¥

## 4.2 åˆ›å»ºBean

![image-20210819110300141](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110300141.png)

åœ¨xmlæ–‡ä»¶ä¸­ä½¿ç”¨Beanæ ‡ç­¾ï¼Œåœ¨æ ‡ç­¾ä¸­æ·»åŠ å¯¹åº”çš„å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡çš„åˆ›å»º

**Beanæ ‡ç­¾ä¸­çš„å±æ€§**ï¼š

- **id**ï¼šè¯¥å®ä¾‹åŒ–å¯¹è±¡çš„æ ‡è¯†
- **class**ï¼šå®ä¾‹åŒ–å¯¹è±¡çš„ç±»å…¨è·¯å¾„
- **name**ï¼šå’Œidå±æ€§ä½œç”¨ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºnameå¯ä»¥åŠ ç‰¹æ®Šç¬¦å·ï¼Œidä¸å¯ä»¥ï¼ˆä¸å¸¸ç”¨ï¼‰

**ç‰¹ç‚¹**ï¼š

- ä½¿ç”¨xmlçš„beanæ ‡ç­¾åˆ›å»ºå¯¹è±¡é»˜è®¤ä½¿ç”¨è¯¥å¯¹è±¡çš„æ— å‚æ„é€ å»åˆ›å»ºï¼Œæ‰€ä»¥å¦‚æœè¯¥å¯¹è±¡æ²¡æœ‰ç”Ÿæˆæ— å‚æ„é€ ä¼šå®ä¾‹åŒ–å¤±è´¥

## 4.3 å±æ€§æ³¨å…¥

### 4.3.1 setteræ–¹å¼

**Bookå®ä½“**

![image-20210819110542025](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110542025.png)

**bean.xmlé…ç½®æ–‡ä»¶**

**æ³¨æ„**ï¼šæƒ³è¦ä½¿ç”¨setteræ³¨å…¥çš„è¯è¯¥å®ä½“ä¸€å®šè¦æœ‰setæ–¹æ³•

![image-20210819110355959](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110355959.png)

**æµ‹è¯•**

![image-20210819110442380](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110442380.png)

### 4.3.2 æ„é€ å‡½æ•°æ–¹å¼

**orderè®¢å•å®ä½“**

![image-20210819110631420](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110631420.png)

**bean.xmlé…ç½®æ–‡ä»¶**

**æ³¨æ„**ï¼šæƒ³è¦ä½¿ç”¨ç‹—å’±å‡½æ•°æ³¨å…¥çš„è¯è¯¥å®ä½“ä¸€å®šè¦æœ‰æœ‰å‚æ„é€ 

![image-20210819110645122](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110645122.png)

**æµ‹è¯•**

![image-20210819110659431](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110659431.png)

### 4.3.3 å±æ€§æ³¨å…¥ - æ³¨å…¥å¤–éƒ¨Bean

æ¯”å¦‚ç°åœ¨æœ‰ä¸ªå®ä½“å« Schoolï¼Œè¿™ä¸ªå®ä½“ä¸­æœ‰ä¸ªå±æ€§æ˜¯Bookï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•å»ä½¿ç”¨xmlæ–¹å¼å»å®ä¾‹åŒ–å¹¶å±æ€§æ³¨å…¥Schoolå‘¢ï¼Ÿ

**Schoolå®ä½“**

![image-20210819110725131](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110725131.png)

**bean.xmlé…ç½®æ–‡ä»¶**

**æ³¨æ„**ï¼šè¿™é‡Œæˆ‘æ˜¯ç”¨setteræ–¹æ³•æ³¨å…¥ï¼Œä½¿ç”¨æ„é€ å‡½æ•°çš„è¯ä¹Ÿæ˜¯ä¸€æ ·çš„

![image-20210819110739068](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110739068.png)

**æµ‹è¯•**

![image-20210819110757867](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110757867.png)

### 4.3.4 å±æ€§æ³¨å…¥ - æ³¨å…¥å†…éƒ¨Bean

**Bookå®ä½“ï¼ˆå’Œä¸Šé¢ç›¸åŒï¼‰**

![image-20210819110837664](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110837664.png)

**Schoolå®ä½“ï¼ˆå’Œä¸Šé¢ç›¸åŒï¼‰**

![image-20210819110850572](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110850572.png)

**bean.xmlé…ç½®æ–‡ä»¶**

**æ³¨æ„**ï¼šè¿™é‡Œæˆ‘æ˜¯ç”¨setteræ–¹æ³•æ³¨å…¥ï¼Œä½¿ç”¨æ„é€ å‡½æ•°çš„è¯ä¹Ÿæ˜¯ä¸€æ ·çš„

![image-20210819110903901](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110903901.png)

**æµ‹è¯•**

![image-20210819110919779](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110919779.png)

### 4.3.5 å±æ€§æ³¨å…¥ - é›†åˆå±æ€§

**éƒ¨é—¨å®ä½“ï¼ˆåŒ…å«äº†Listã€æ•°æ®ã€Mapï¼‰**

![image-20210819110954059](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819110954059.png)

**bean.xmlé…ç½®æ–‡ä»¶**

**æ³¨æ„**ï¼šè¿™é‡Œæˆ‘æ˜¯ç”¨setteræ–¹æ³•æ³¨å…¥ï¼Œä½¿ç”¨æ„é€ å‡½æ•°çš„è¯ä¹Ÿæ˜¯ä¸€æ ·çš„

![image-20210819111009972](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111009972.png)

**æµ‹è¯•**

![image-20210819111026438](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111026438.png)

## 4.4 FactoryBeanï¼ˆå·¥å‚Beanï¼‰

**åŒºåˆ«**ï¼š

â€‹	**æ™®é€šbean**ï¼šä¸Šé¢çš„æ‰€æœ‰æˆ‘ä»¬åœ¨xmlä¸­é…ç½®çš„beanè¿”å›å€¼ç±»å‹å°±æ˜¯å½“å‰beançš„ç±»å‹

â€‹	**å·¥å‚bean**ï¼šè¿˜æœ‰ä¸€ç§beanå°±æ˜¯å·¥å‚beanï¼Œä»–åœ¨xmlä¸­é…ç½®çš„beançš„è¿”å›å€¼ç±»å‹å°±å¯ä»¥ä¸æ˜¯å½“å‰beanç±»å‹

### 4.4.1 ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºå·¥å‚Bean

è¯¥ç±»ä¸€å®šè¦å®ç°FactoryBeanæ¥å£

```java
//éœ€è¦åœ¨FactoryBeançš„æ³›å‹ä¸­å®šä¹‰éœ€è¦è¿”å›çš„beanå¯¹è±¡
public class MyBean implements FactoryBean<User> {

    /**
     * å®šä¹‰è¿”å›bean
     */
    @Override
    public User getObject() throws Exception {
        User user = new User();
        user.setName("å¼ ä¸‰");
        return user;
    }
    
    @Override
    public Class<?> getObjectType() {
        return null;
    }
}
```

### 4.4.2 ç¬¬äºŒæ­¥ï¼šåœ¨XMLä¸­å®šä¹‰Bean

```java
<!--å·¥å‚bean è¿”å›beanç±»å‹éå½“å‰å®šä¹‰ç±»å‹-->
<bean id="myBean" class="com.eayon.entity.MyBean"></bean>
```

### 4.4.3 ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•

![image-20210819111220706](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111220706.png)

## 4.5 Beançš„ä½œç”¨åŸŸï¼ˆå•ä¾‹/å¤šä¾‹ï¼‰

åœ¨Springä¸­çš„beanæ˜¯åˆ†ä¸ºå•ä¾‹å’Œå¤šä¾‹çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨åˆ›å»ºBeançš„æ—¶å€™å»è¿›è¡Œæ§åˆ¶

**åœ¨ä¸åšä»»ä½•é…ç½®çš„æƒ…å†µä¸‹Springåˆ›å»ºå‡ºæ¥çš„Beanæ˜¯å•ä¾‹çš„ã€‚**

### 4.5.1 éªŒè¯Springé»˜è®¤æƒ…å†µä¸‹çš„Beanæ˜¯å•ä¾‹çš„

å¦‚æœè¾“å‡ºçš„Userå¯¹è±¡åœ°å€æ˜¯åŒä¸€ä¸ªåˆ™è¯´æ˜æ˜¯å•ä¾‹

**xmlæ–‡ä»¶ä¸­å®šä¹‰user bean**

![image-20210819111324681](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111324681.png)

**æµ‹è¯•**

![image-20210819111341594](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111341594.png)

### 4.5.1 ä¿®æ”¹Spring Beané»˜è®¤å•ä¾‹ä¸ºå¤šä¾‹

**xmlæ–‡ä»¶ä¸­å®šä¹‰user bean**

æˆ‘ä»¬å¯ä»¥é€šè¿‡``Scope = "singleton"`` æˆ–è€…`` Scope = "prototype"`` ä¿®æ”¹beanä¸ºå•ä¾‹ï¼ˆsingletonï¼‰æˆ–è€…å¤šä¾‹ï¼ˆprototypeï¼‰

å¹¶ä¸”å¦‚æœè®¾ç½®æˆsingletonåˆ™åœ¨åŠ è½½xmlæ–‡ä»¶æ—¶å°±å»å®ä¾‹åŒ–ï¼Œè€Œprototypeåˆ™æ˜¯åœ¨getBean()çš„æ—¶å€™å®ä¾‹åŒ–

![image-20210819111436998](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111436998.png)

**æµ‹è¯•**

![image-20210819111451671](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111451671.png)

## 4.6 è‡ªåŠ¨è£…é…ï¼ˆè‡ªåŠ¨æ³¨å…¥ï¼‰

### 4.6.1 æ‰‹åŠ¨è£…é…

æˆ‘ä»¬ä¸Šé¢æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ‰‹åŠ¨è£…é…ï¼Œè¿™é‡Œå†æ¼”ç¤ºä¸€æ¬¡ è®©å¤§å®¶å¥½ç†è§£

**å®ä½“**

![image-20210819111526118](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111526118.png)

![image-20210819111534163](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111534163.png)

**xmlæ–‡ä»¶**

å…¶å®å°±æ˜¯å’Œä¹‹å‰çš„æ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œæ‰‹åŠ¨è£…é…å¤–éƒ¨bean

![image-20210819111552636](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111552636.png)

**æµ‹è¯•**

![image-20210819111605807](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111605807.png)

### 4.6.2 è‡ªåŠ¨è£…é…

**å®ä½“ç›¸åŒ ä¸åšæ¼”ç¤º**

**XMLæ–‡ä»¶**

![image-20210819111629232](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111629232.png)

**æµ‹è¯•**

![image-20210819111642752](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111642752.png)



# äº”. IoC Beanç®¡ç† - åŸºäºæ³¨è§£æ–¹å¼

## 5.1 Springä¸­åˆ›å»ºBeançš„æ³¨è§£

- @Controllerï¼šå¸¸ç”¨äºWebå±‚
- @Serviceï¼šå¸¸ç”¨äºServiceå±‚
- @Repositoryï¼šå¸¸ç”¨äºæŒä¹…å±‚
- @Componentï¼šé€šç”¨

å…¶å®å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥åˆ›å»ºBeanå®ä¾‹ï¼Œåªä¸è¿‡æ˜¯ä¸€ç§è§„èŒƒè€Œå·²ã€‚

## 5.2 åŸºäºæ³¨è§£å®ç°Beanåˆ›å»º

### 5.2.1 å¼•å…¥ä¾èµ–

![image-20210819111745348](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111745348.png)

### 5.2.2 å¼€å¯ç»„ä»¶æ‰«æ

åœ¨xmlæ–‡ä»¶ä¸­æ·»åŠ å¼€å¯ç»„ä»¶æ‰«æï¼Œå»æ‰«ææˆ‘ä»¬åŠ äº†æ³¨è§£çš„ç±»

**å¤‡æ³¨ï¼šxmlæ–‡ä»¶å¤´å¿…é¡»ä¸ºå¦‚ä¸‹æ ¼å¼**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                            http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd">

    <!--å¼€å¯ç»„ä»¶æ‰«æ   æ‰«æcom.eayonåŒ…ä¸‹æ‰€æœ‰å¸¦æœ‰æ³¨è§£çš„ç±» ç„¶åå»å®ä¾‹åŒ–-->
    <context:component-scan base-package="com.eayon"></context:component-scan>

</beans>
```

### 5.2.3 åˆ›å»ºç±» æ·»åŠ æ³¨è§£

![image-20210819111830901](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111830901.png)

### 5.2.4 æµ‹è¯•

![image-20210819111844856](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111844856.png)

## 5.3 åŸºäºæ³¨è§£å®ç°å±æ€§è‡ªåŠ¨æ³¨å…¥

- @AutoWiredï¼šé»˜è®¤æ˜¯æŒ‰ç…§ByTypeè¿›è¡Œæ³¨å…¥ï¼Œå¦‚æœå½“å‰Typeç±»å‹ä¸ªæ•°å¤§äº1çš„è¯åˆ™æŒ‰ç…§ByNameè¿›è¡Œæ³¨å…¥ã€‚å¦‚æœå£°æ˜æŒ‰ç…§ByNameè¿›è¡Œæ³¨å…¥éœ€è¦å’Œ@Qualifieræ³¨è§£ä¸€èµ·è¿›è¡Œä½¿ç”¨ã€‚
- @Qualifierï¼šæ ¹æ®ByNameå±æ€§åç§°è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ï¼Œå¿…é¡»è¦å’Œ@AutoWiredç»“å’Œä½¿ç”¨
- @Resourceï¼šé»˜è®¤æŒ‰ç…§ByNameè¿›è¡Œæ³¨å…¥ï¼Œå¦‚æœæ³¨å…¥å¤±è´¥ï¼Œåˆ™æŒ‰ç…§ByTypeè¿›è¡Œæ³¨å…¥
- @Valueï¼šæ³¨å…¥æ™®é€šç±»å‹å±æ€§ï¼Œå¦‚String...

### 5.3.1 @AutoWired

é»˜è®¤æ˜¯æŒ‰ç…§ByTypeè¿›è¡Œæ³¨å…¥ï¼Œå¦‚æœå½“å‰Typeç±»å‹ä¸ªæ•°å¤§äº1çš„è¯åˆ™æŒ‰ç…§ByNameè¿›è¡Œæ³¨å…¥ã€‚å¦‚æœå£°æ˜æŒ‰ç…§ByNameè¿›è¡Œæ³¨å…¥éœ€è¦å’Œ@Qualifieræ³¨è§£ä¸€èµ·è¿›è¡Œä½¿ç”¨ã€‚

**UserService**

![image-20210819111932337](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111932337.png)

**UserDao**

![image-20210819111944850](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111944850.png)

**æµ‹è¯•UserServiceæ˜¯å¦é€šè¿‡æ³¨è§£è‡ªåŠ¨æ³¨å…¥äº†UserDao**

![image-20210819111958089](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819111958089.png)

### 5.3.2 @Qualifie

æ ¹æ®ByNameå±æ€§åç§°è¿›è¡Œè‡ªåŠ¨æ³¨å…¥ï¼Œå¿…é¡»è¦å’Œ@AutoWiredç»“å’Œä½¿ç”¨

**UserService**

![image-20210819112021658](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112021658.png)

**UserDao**

![image-20210819112045944](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112045944.png)

**æµ‹è¯•UserServiceæ˜¯å¦é€šè¿‡æ³¨è§£è‡ªåŠ¨æ³¨å…¥äº†UserDao**

![image-20210819112058729](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112058729.png)

### 5.3.3 @Resource

é»˜è®¤æŒ‰ç…§ByNameè¿›è¡Œæ³¨å…¥ï¼Œå¦‚æœæ³¨å…¥å¤±è´¥ï¼Œåˆ™æŒ‰ç…§ByTypeè¿›è¡Œæ³¨å…¥

**UserService**

![image-20210819112122037](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112122037.png)

**UserDao**

![image-20210819112135830](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112135830.png)

**æµ‹è¯•UserServiceæ˜¯å¦é€šè¿‡æ³¨è§£è‡ªåŠ¨æ³¨å…¥äº†UserDao**

![image-20210819112150153](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112150153.png)

### 5.3.4 @Value

**UserService**

![image-20210819112237369](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112237369.png)

**æµ‹è¯•**

![image-20210819112254263](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112254263.png)



# å…­. é€šè¿‡é…ç½®ç±»å®Œå…¨æ›¿ä»£XMLæ–‡ä»¶

å¦‚ä¸Šæˆ‘ä»¬é€šè¿‡æ³¨è§£å¯ä»¥å®Œå…¨æ›¿ä»£åœ¨XMLä¸­ç¼–å†™beanæ ‡ç­¾å»å®ä¾‹åŒ–beançš„æ“ä½œå’Œå±æ€§æ³¨å…¥çš„æ“ä½œï¼Œ

ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨XMLä¸­ç¼–å†™æ ‡ç­¾å»æ‰«ææˆ‘ä»¬å¢åŠ æ³¨è§£çš„ç±»æ‰èƒ½å»å®ä¾‹åŒ–ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®ç±»å»è§£å†³ã€‚

## 6.1 åˆ›å»ºé…ç½®ç±»

![image-20210819112335230](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112335230.png)

è¿™ä¸ªé…ç½®ç±»å°±ç­‰åŒäºå¦‚ä¸‹XMLé…ç½®

![image-20210819112348630](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112348630.png)

## 6.2 æµ‹è¯•

æµ‹è¯•å’Œä¹‹å‰æœ‰æ‰€ä¸åŒï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å†å»åŠ è½½XMLæ–‡ä»¶äº†ï¼Œè€Œæ˜¯å»åŠ è½½æˆ‘ä»¬çš„é…ç½®ç±»

![image-20210819112407552](https://cdn.jsdelivr.net/gh/EayonLee/IMG-Cloud@master/data/image-20210819112407552.png)





















